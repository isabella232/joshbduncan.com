<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="description" content="design. maker. fun haver." />
  <title>joshd.xyz</title>
  <link rel="stylesheet" type="text/css" href="/static/styles.css" />
  <link rel="stylesheet" type="text/css" href="/static/codehilite.css" />
  <link rel="shortcut icon" href="/static/favicon.ico" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-200586146-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "UA-200586146-2");
  </script>
  <!-- OPEN GRAPH, FACEBOOK, TWITTER META TAGS -->
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="joshd.xyz" />
  <meta property="og:url" content="https://joshd.xyz/python-custom-sorting.html" />
  
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Custom Sorting in Python" />
  <meta property="og:description" content="I recently found myself needing to sort a list by cardinal directions. Here&#39;s a super simple solution to do custom sorting in Python." />
  
  <meta property="og:image" content="https://joshd.xyz/static/images/jbd-card.png" />
  <meta name="twitter:site" content="@joshbduncan" />
  <meta name="twitter:creator" content="@joshbduncan" />
</head>

<body>
  <header>
    <input id="toggle" type="checkbox" autocomplete="off" />
    <label for="toggle" id="hamburger">
      <div id="top-bun"></div>
      <div id="meat"></div>
      <div id="bottom-bun"></div>
    </label>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/categories.html">Categories</a></li>
        <li><a href="/tags.html">Tags</a></li>
        <li><a href="/search.html">Search</a></li>
        <li><a href="/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <logo>
      <a href="/" title="Home">
        <img src="/static/images/jbd_avatar_pixel_head.svg" alt="joshd.xyz" width="72" height="72"
             onmouseover="wink(this, 1)" onmouseout="wink(this, 0)" />
      </a>
    </logo>
  </header>

  <section>
    <div class="container">
      <!-- FLASK BLOCK CONTENT -->
      
<article>
  <h1>Custom Sorting in Python</h1>
  <div id="post-meta">
    By Josh Duncan •
    
    <b>Published</b> August 2021 •
    <a href="/category/development.html"><b>development</b></a>
  </div>
  <div id="post-body">
    <p>While working on my new Python project <a href="https://github.com/joshbduncan/word-search-generator">Word-Search-Generator</a>, I needed a way to do a custom sort based on <a href="https://en.wikipedia.org/wiki/cardinal_direction">cardinal directions</a> (think compass). I knew I could do it with a custom function and some looping but I wanted to use a Python <a href="https://docs.python.org/3/library/functions.html#built-in-functions">built-in function</a> if possible.</p>
<h2>The Problem</h2>
<p>Depending on the level of the puzzle, words can go in two, four, or eight cardinal directions... But, due to the number of words provided and how they fit into the puzzle, not all directions for each level are always used.</p>
<p>I needed a way to sort all of the directions actually used by words during puzzle generation so that they display in the same order as a compass.</p>
<h2>What I'm Working With</h2>
<p>So, I have an answer key for each puzzle that's a dictionary of all contained words along with their start location and direction.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span>
<span class="go">{&quot;CAT&quot;: {&quot;start&quot;: (1, 34), &quot;direction&quot;: &quot;SE&quot;},</span>
<span class="go"> &quot;CHICKEN&quot;: {&quot;start&quot;: (46, 26), &quot;direction&quot;: &quot;E&quot;},</span>
<span class="go"> &quot;DOG&quot;: {&quot;start&quot;: (32, 45), &quot;direction&quot;: &quot;NE&quot;},</span>
<span class="go"> &quot;ROOSTER&quot;: {&quot;start&quot;: (32, 12), &quot;direction&quot;: &quot;N&quot;},</span>
<span class="go"> &quot;SHEEP&quot;: {&quot;start&quot;: (30, 2), &quot;direction&quot;: &quot;S&quot;},</span>
<span class="go"> &quot;GOAT&quot;: {&quot;start&quot;: (29, 48), &quot;direction&quot;: &quot;W&quot;},</span>
<span class="go"> &quot;HORSE&quot;: {&quot;start&quot;: (16, 26), &quot;direction&quot;: &quot;SE&quot;},</span>
<span class="go"> &quot;LAMB&quot;: {&quot;start&quot;: (25, 10), &quot;direction&quot;: &quot;N&quot;}}</span>
</code></pre></div>

<h2>The Solution</h2>
<p>First, I need to get all the directions from the dictionary.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">dirs</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;direction&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">values</span><span class="p">()}</span>
<span class="go">[&quot;NE&quot;, &quot;N&quot;, &quot;S&quot;, &quot;W&quot;, &quot;SE&quot;, &quot;E&quot;]</span>
</code></pre></div>

<p>You'll notice that only six of the eight possible cardinal directions were used in this particular puzzle, and if I use the default <code>sorted()</code> method they aren't in the order I need them.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">dirs</span><span class="p">)</span>
<span class="go">[&quot;E&quot;, &quot;N&quot;, &quot;NE&quot;, &quot;S&quot;, &quot;SE&quot;, &quot;W&quot;]</span>
</code></pre></div>

<h3>A Little Helper</h3>
<p>To help out, I setup a new variable which has all eight possible cardinal directions in the order they are on a compass (starting at the top and going clockwise).</p>
<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">sort_by</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="s2">&quot;NE&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;SE&quot;</span><span class="p">,</span> <span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;SW&quot;</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="s2">&quot;NW&quot;</span><span class="p">)</span>
</code></pre></div>

<p>Now, when we I call <code>sorted()</code>, I can provide the <a href="https://docs.python.org/3/howto/sorting.html#key-functions">key parameter</a> that lets Python know how I want the sorting performed. But I can't just provide <code>sort_by</code> as they key. Python requires a "function or other callable".</p>
<h3>Enter Lambdas</h3>
<p>The key I'm using to sort by is the <a href="https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions">lambda function</a> <code>key=lambda d: sort_by.index(d)</code>.</p>
<blockquote>
<p>Lambdas are "small anonymous functions" that run a single expression against a provided argument.</p>
</blockquote>
<p>My lambda takes each direction from <code>dirs</code> as variable <code>d</code>, looks up its <a href="https://docs.python.org/3/tutorial/datastructures.html#data-structures">index</a> in <code>sort_by</code> and returns that number. Python then uses that number to determine the sorting placement.</p>
<h2>The Result</h2>
<p>Finally, if I supply Python's <code>sorted()</code> function with my new <code>key</code> I get exactly what I was looking for.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">dirs</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">sort_by</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
<span class="go">[&quot;N&quot;, &quot;NE&quot;, &quot;E&quot;, &quot;SE&quot;, &quot;S&quot;, &quot;W&quot;]</span>
</code></pre></div>

<p>👌 Perfecto! If you follow a compass clockwise, you'll find each direction in the correct order.</p>
<h1>Extra Credit</h1>
<p>Need a weighted sort based on how many times an item is present?</p>
<div class="codehilite"><pre><span></span><code><span class="go"># list to sort by count</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">]</span>
<span class="go"># ascending</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">dirs</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">dirs</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
<span class="go">[&quot;N&quot;, &quot;E&quot;, &quot;W&quot;]</span>
<span class="go"># descending</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">dirs</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">dirs</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[&quot;W&quot;, &quot;E&quot;, &quot;N&quot;]</span>
</code></pre></div>

<p>How about sorting by word length?</p>
<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;nine&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;twelve&quot;</span><span class="p">,</span> <span class="s2">&quot;seventeen&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">words</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">word</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">))</span>
<span class="go">[&quot;one&quot;, &quot;nine&quot;, &quot;twelve&quot;, &quot;seventeen&quot;]</span>
</code></pre></div>

<p>And, if your information is formatted correctly you can use the <a href="https://docs.python.org/3/howto/sorting.html#operator-module-functions">Operator Module Functions</a> <code>itemgetter</code> and <code>attrgetter</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span><span class="p">,</span> <span class="n">attrgetter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">student_grades</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;Ella&quot;</span><span class="p">,</span> <span class="mi">76</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Dave&quot;</span><span class="p">,</span> <span class="mi">92</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Jess&quot;</span><span class="p">,</span> <span class="mi">97</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="mi">84</span><span class="p">))</span>
<span class="go"># sort students by grade from highest to lowest using itemgetter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">student_grades</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[(&quot;Jess&quot;, 97), (&quot;Dave&quot;, 92), (&quot;Bob&quot;, 84), (&quot;Ella&quot;, 76)]</span>
</code></pre></div>

<p>Now, using <code>attrgetter</code> to sort by a specific object attribute.</p>
<div class="codehilite"><pre><span></span><code><span class="go"># setup a Pet class to structure the objects</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Pet</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="nb">repr</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">))</span>
<span class="go"># create some pets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pets</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">Pet</span><span class="p">(</span><span class="s2">&quot;Maddie&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">62</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">Pet</span><span class="p">(</span><span class="s2">&quot;Harper&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">Pet</span><span class="p">(</span><span class="s2">&quot;Greta&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">]</span>
<span class="go"># sort the pets by weight</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">pets</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;weight&quot;</span><span class="p">))</span>
<span class="go">[(&quot;Greta&quot;, &quot;10&quot;, 9), (&quot;Harper&quot;, &quot;13&quot;, 15), (&quot;Maddie&quot;, &quot;8&quot;, 62)]</span>
<span class="go"># sort the pets from oldest to youngest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">pets</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[(&quot;Harper&quot;, 13, 15), (&quot;Greta&quot;, 10, 9), (&quot;Maddie&quot;, 8, 62)]</span>
</code></pre></div>

<h1>Final Thoughts</h1>
<p>There are many other ways to do sorting in Python but I think these few are pretty slick. Check out the <a href="https://docs.python.org/3/howto/sorting.html">Python Docs on Sorting</a> for more information and examples. ✌️</p>
  </div>
  <div id="post-tags">
    
    <ul id="tags">
      <li><b>Tags:</b></li>
      
      <li><a href="/tag/python.html">python</a>, </li>
      
      <li><a href="/tag/sort.html">sort</a>, </li>
      
      <li><a href="/tag/sorting.html">sorting</a></li>
      
    </ul>
    
  </div>
</article>

    </div>
  </section>

  <footer class="text-align-center">
    <p>&copy; 2021 Josh Duncan</p>
    <ul>
      <li>
        <a href="https://github.com/joshbduncan" target="_blank" class="text-decoration-none">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
          </svg>
        </a>
      </li>
      <li>
        <a href="https://twitter.com/joshbduncan" target="_blank" class="text-decoration-none">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16">
            <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" />
          </svg>
        </a>
      </li>
      <li>
        <a href="https://www.instagram.com/joshbduncan/" target="_blank" class="text-decoration-none">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
            <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z" />
          </svg>
        </a>
      </li>
    </ul>
  </footer>

  <script>
    // wink wink 😉
    function wink(e, action) {
      if (action === 1) { e.src = "/static/images/jbd_avatar_pixel_head_wink.svg"; }
      else { e.src = "/static/images/jbd_avatar_pixel_head.svg"; }
    }
  </script>

</body>

</html>